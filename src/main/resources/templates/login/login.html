<!DOCTYPE html>
<html>
<head>
<base href="/" />
<meta charset="UTF-8">
<title>로그인</title>
<link rel="stylesheet" type="text/css" href="css/login.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<!-- 별도의 script도 생성 -->
<script type="text/javascript">

	function sendIt() {
		
		var f = document.myForm;
		
		//아이디 입력 오류 메시지
		str_id = f.userid.value;
		str_id = str_id.trim();
		
		if(str_id==""){
			swal({
				  title: "아이디 입력오류",
				  text: "아이디를 입력하세요.",
				  icon: "error",
				  button: "확인",
				});
			event.preventDefault();
			return;
		}
		
		//아이디 입력 오류 메시지
		str_pwd = f.pwd.value;
		str_pwd = str_pwd.trim();
		
		if(str_pwd==""){
			swal({
				  title: "비밀번호 입력오류",
				  text: "비밀번호를 입력하세요.",
				  icon: "error",
				  button: "확인",
				});
			event.preventDefault();
			return;
		}
		

		$.ajax({
	        url: './login/login_check',
	        type: 'post',
	        data: {userid:str_id,pwd:str_pwd},
	        success: function(result) {
	            if(result!="") {
	            	f.action="login/login_ok";
	        		f.submit();
	            }
	            else {
	                swal({
	  				  title: "로그인 오류",
	  				  text: "아이디나 비밀번호가 틀렸습니다.",
	  				  icon: "error",
	  				  button: "확인",
	  				});
	            }
	        },
	    });
		event.preventDefault();
		
	}

</script>


</head>
<body>
<div class="container" id="container">
	<div class="form-container sign-in-container">
		<div style="text-align: center; width: 400px;">
		<a href="list">[ 리스트 페이지 ]</a>
		</div>
		<form action="#" name="myForm" method="post">
			<h1>로그인</h1>
			<div class="social-container">
				<a href="/oauth2/authorization/google" class="social"><img src="/image/google.png" alt="Google 로고"></a>
				<a href="/oauth2/authorization/kakao" class="social"><img src="/image/kakao.png" alt="카카오 로고"></a>
				<a href="/oauth2/authorization/naver" class="social"><img src="/image/naver.png" alt="네이버 로고"></a>
			</div>
			<input type="text" name="userid" placeholder="아이디" />
			<input type="password" name="pwd" placeholder="비밀번호" />
			<p><b><a href="/login/searchId">아이디 찾기</a> &nbsp;&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;&nbsp; <a href="/login/searchPwd">비밀번호 찾기</a></b></p>
			<button type="button" onclick="sendIt();">로그인</button>
		</form>
	</div>
	<div class="overlay-container">
		<div class="overlay">

			<div class="overlay-panel overlay-right">
				<h1>환영합니다!</h1>
				<p>처음 방문하시는 분은 아래 회원가입 버튼을 눌러주세요.</p>
				<button class="ghost" id="register" onclick="location.href='login/register_select';"> 회원가입 </button>
			</div>
			<div th:if="${fail != null}">
				<script>
					alert("ㅇㅇ");
				</script>
			</div>
		</div>
	</div>
</div>



<footer>
	<p>
		Created with <i class="fa fa-heart"></i> by
		<a target="_blank" href="https://florin-pop.com">Florin Pop</a>
		- Read how I created this and how you can join the challenge
		<a target="_blank" href="https://www.florin-pop.com/blog/2019/03/double-slider-sign-in-up-form/">here</a>.
	</p>
</footer>

</body>

</html>